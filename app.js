const express = require('express');                                                                                                                                                               const app = express();                                                                                                                                                                                                                                                                                                                                                                              const mysql = require('mysql');                                                                                                                                                                                                                                                                                                                                                                     // Define SQL queries for CRUD operations on the users table                                                                                                                                      const SQL_SELECT_ALL_USERS = 'SELECT * FROM users';                                                                                                                                               const SQL_SELECT_USER_BY_ID = 'SELECT * FROM users WHERE id = ?';                                                                                                                                 const SQL_INSERT_USER = 'INSERT INTO users (name, email) VALUES (?, ?)';                                                                                                                          const SQL_UPDATE_USER_BY_ID = 'UPDATE users SET name = ?, email = ? WHERE id = ?';                                                                                                                const SQL_DELETE_USER_BY_ID = 'DELETE FROM users WHERE id = ?';                                                                                                                                    // Create a connection pool                                                                                                                                                                        const pool = mysql.createPool({                                                                                                                                                                      connectionLimit: 10,                                                                                                                                                                              host: 'localhost',                                                                                                                                                                                port: '33061', // Specify the port here                                                                                                                                                           user: 'root',                                                                                                                                                                                     password: 'root',                                                                                                                                                                                 database: 'test_dbAPI'                                                                                                                                                                                            });                                                                                                                                                                                                                                                                                                                                                                                    // Check if the connection is successful                                                                                                                                                          pool.getConnection((err, connection) => {                                                                                                                                                             if (err) {                                                                                                                                                                                                console.error('Error connecting to MySQL:', err);                                                                                                                                                         return;                                                                                                                                                                                               }                                                                                                                                                                                                    console.log('Connected to MySQL database');                                                                                                                                                            connection.release(); // Release the connection                                                                                                                                                   });                                                                                                                                                                       // Define a route for the root endpoint                                                                                                                                                            app.get('/', (req, res) => {                                                                                                                                                                          res.send('Hello, World!');                                                                                                                                                                    });       
//let users = []; // In-memory array to store user data                                                                                                                                            // Route for getting all users                                                                                                                                                                     app.get('/users', (req, res) => {                                                                                                                                                                     res.json(users);                                                                                                                                                                                  });                                                                                                                                                                                              // Route for getting a specific user by ID                                                                                                                                                             app.get('/users/:id', (req, res) => {                                                                                                                                                                 const userId = req.params.id;                                                                                                                                                                         const user = users.find(user => user.id === userId);                                                                                                                                                  if (user) {                                                                                                                                                                                               res.json(user);                                                                                                                                                                                       } else {                                                                                                                                                                                                  res.status(404).json({ error: 'User not found' });                                                                                                                                                    }                                                                                                                                                                                                 });                                                                                                                                                               // Route for creating a new user                                                                                                                                                                       app.post('/users', (req, res) => {                                                                                                                                                                const newUser = req.body;                                                                                                                                                                         users.push(newUser);                                                                                                                                                                              res.status(201).json(newUser);                                                                                                                                                                     });                                                                                                                                                                                                                                                                                                                                                                                           // Route for updating an existing user                                                                                                                                                                 app.put('/users/:id', (req, res) => {                                                                                                                                                             const userId = req.params.id;                                                                                                                                                                     const updateUser = req.body;                                                                                                                                                                      const index = users.findIndex(user => user.id === userId);                                                                                                                                                                                                       if (index !== -1) {                                                                                                                                                                                       users[index] = { ...users[index], ...updateUser };                                                                                                                                                        res.json(users[index]);                                                                                                                                                                               } else {                                                                                                                                                                                                  res.status(404).json({ error: 'User not found' });                                                                                                                                                     }                                                                                                                                                                                                 });                                                                                                       // Route for deleting an existing user                                                                                                                                                                 app.delete('/users/:id', (req, res) => {                                                                                                                                                          const userId = req.params.id                                                                                                                                                                      users = users.filter(user => user.id !== userId);                                                                                                                 res.status(204).send();                                                                                                                     });                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const PORT = process.env.PORT || 3000;                                                                                                                                                            app.listen(PORT, () => {                                                                                                                                                                                      console.log(`Server is running on port http://localhost:${PORT}`);                                                                                                                    });                 